@model PartWebApp2.Models.Party

@{
    ViewData["Title"] = "Details";
    Layout = "_HomeLayout";
}

<head>
    <link rel="stylesheet" href="~/css/HomePage.css" />
    <style>
        h2 {
            text-align: center;
            color: #ffffff;
        }
        h3 {
            text-align: center;
            color: #ffffff;
        }
        h4 {
            text-align: center;
            color: #ffffff;
        }
        .thumbnail {
            background-color: transparent;
        }
        .image-background {
            margin-top: 30px;
            background-image: url(@Html.DisplayFor(model => model.partyImage.imageUrl));
        }
    </style>
</head>
    <div class="jumbotron text-center image-background">
        <h1>@Html.DisplayFor(model => model.name)</h1>
        <p>@Html.DisplayFor(model => model.eventDate)</p>
    </div>
    <div id="portfolio" class="container-fluid text-center">
        @if(ViewBag.artists != null)
        {
            <h2>Lineup</h2><br>
            <h4>The best of the @Html.DisplayFor(model => model.genre.Type) genre</h4>
        }
        <div class="row text-center slideanim">
            @for (var i = 0; i < ViewBag.artists?.Length; i++)
            {
                var artist = ViewBag.artists[i];
                var artistPlayer = "https://open.spotify.com/embed/artist/" + artist.Id + "?theme=0";
                <div class="col-sm-5 col-md-3">
                    <div class="thumbnail">
                        <img src=@artist.Images[0].Url alt=@artist.Name width="400" height="300" style="margin-bottom:-25px" />
                        <div class="caption">
                            <iframe src=@artistPlayer
                                    width="317"
                                    height="80"
                                    frameBorder="0"
                                    allowtransparency="true"
                                    allow="encrypted-media">
                            </iframe>
                        </div>
                    </div>
                </div>
            }
        </div><br>
    </div>
    @{
        var googleApiKey = "AIzaSyAfpKKSNaLzexuYOjKed1qvBlCTcEgHwco";
        var googleMapSrc = "https://www.google.com/maps/embed/v1/place?key=" + googleApiKey + "&q=place_id:" + Model.club.LocationId;
        <div id="services" class="container-fluid text-center">
            <h2>LOCATION</h2>
            <br>
            <div class="row slideanim">
                <div class="col-sm-3">
                    <h4>CAPACITY</h4>
                    <span class="glyphicon glyphicon-user logo-small"></span>
                    <h2>@Html.DisplayFor(model => model.maxCapacity)</h2>
                </div>
                <div class="col-sm-6">
                    <iframe width="450"
                            height="300"
                            style="border:0"
                            loading="lazy"
                            allowfullscreen
                            src=@googleMapSrc>
                    </iframe>
                </div>
                <div class="col-sm-3">
                    <h4>DOORS OPEN AT</h4>
                    <span class="glyphicon glyphicon-time logo-small"></span>
                    <h2>@Html.DisplayFor(model => model.startTime)</h2>
                </div>
            </div>
        </div>
    }
    <hr />
    <div id="about" class="container-fluid bg-grey">
        <div class="row">
            <div class="col-lg-10">
                <h2>So what are you waiting for?</h2>
                <p>Mind youself that in order to get into the party you'll have to be at the minimum age of @Html.DisplayFor(model => model.minimalAge). Following the venue instructions is mandatory at all time. We're not to be hold responsible to any damage inflicted upon the costumer at the time of the event. </p>
            </div>
            <div class="col align-self-end">
                <button type="button" class="btn btn-secondary btn-lg" data-toggle="modal" data-target="#myModal">Get a Ticket!</button>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="flex-column">
                    <div class="container-md m-4 p-3">
                        <h4 class="mb-3">Payment</h4>
                        <ul class="list-group mb-3">
                            <li class="list-group-item d-flex justify-content-between lh-condensed">
                                <div>
                                    <h4 class="my-0">@Html.DisplayFor(model => model.name)</h4>
                                    <small class="text-muted">@Html.DisplayFor(model => model.eventDate)</small>
                                </div>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Total (USD)</span>
                                <strong>@Html.DisplayFor(model => model.price)</strong>
                            </li>
                        </ul>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="cc-name">Name on card</label>
                                <input type="text" class="form-control" id="cc-name" placeholder="" required="">
                                <small class="text-muted">Full name as displayed on card</small>
                                <div class="invalid-feedback">
                                    Name on card is required
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="cc-number">Credit card number</label>
                                <input type="text" class="form-control" id="cc-number" placeholder="" required="">
                                <div class="invalid-feedback">
                                    Credit card number is required
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="cc-expiration">Expiration</label>
                                <input type="text" class="form-control" id="cc-expiration" placeholder="" required="">
                                <div class="invalid-feedback">
                                    Expiration date required
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="cc-expiration">CVV</label>
                                <input type="text" class="form-control" id="cc-cvv" placeholder="" required="">
                                <div class="invalid-feedback">
                                    Security code required
                                </div>
                            </div>
                        </div>
                        <hr class="mb-4">
                        <button class="btn btn-primary btn-lg btn-block" data-dismiss="modal" type="submit">Ticket me already!</button>
                    </div>
                </div>
            </div>

            <table class="aboutitem" style="border: cornflowerblue 0px solid; width: 90%;">
                <tr>
                    <th style="background-color: cornflowerblue;">Ticket Status</th>
                </tr>
                <tr>
                    <td> @Html.DisplayFor(model => model.ticketsPurchased) / @Html.DisplayFor(model => model.maxCapacity)</td>
                </tr>
            </table>
            <a class="btn btn-success buytickets" asp-action="BuyTickets" asp-route-id="@Model.Id">Buy Tickets</a>
        </div>
    </div>